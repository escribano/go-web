var app=angular.module("Settings",[]).directive("btnSubmit",function(){return function(a,c,b){a.$watch(function(){return a.$eval(b.btnSubmit)},function(a){var b=$(c).button();a?b.button("loading"):b.button("reset")})}});Settings.$inject=["$scope","$http"];
function Settings(a,c){a.user={};c.get("index.json").success(function(b){b.Ok&&(a.user=b)});a.close=function(){a.error="";a.saved=!1};a.update=function(b){a.close();a.working=!0;a.user=angular.copy(b);c.post("settings.json",b).success(function(b){b.Ok?0<b.Changes&&(a.saved=!0,a.user.OldPasswd="",a.user.NewPasswd="",a.user.Confirm=""):a.error=b.Error;a.working=!1}).error(function(b,c){404==c?a.error="NotFound":alert("HTTP "+c+": "+b);a.working=!1})}};
